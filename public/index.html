<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quanton3D IA | Landing Cliente</title>
  <style>
    :root {
      color-scheme: dark;
      --bg: #020a1a;
      --panel: rgba(4, 18, 44, 0.75);
      --glow: #23b0ff;
      --glow-strong: #5ad0ff;
      --accent: #0a6cff;
      --accent-soft: rgba(30, 144, 255, 0.35);
      --text: #e6f5ff;
      --shadow: 0 20px 60px rgba(8, 120, 255, 0.35);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, rgba(42, 98, 255, 0.25), transparent 45%),
        radial-gradient(circle at 20% 40%, rgba(0, 214, 255, 0.2), transparent 50%),
        var(--bg);
      color: var(--text);
      padding: 32px 20px 160px;
    }

    .main {
      width: min(1100px, 100%);
      margin: 0 auto;
      display: grid;
      gap: 32px;
    }

    .secao-familia {
      display: flex !important;
      visibility: visible !important;
    }

    .hud {
      background: var(--panel);
      border: 1px solid rgba(60, 160, 255, 0.35);
      border-radius: 28px;
      padding: 32px 28px 36px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(20px);
    }

    .hud h1 {
      font-size: 1.8rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .hud p {
      margin-top: 12px;
      font-size: 1rem;
      line-height: 1.7;
      color: rgba(230, 245, 255, 0.78);
    }

    .cta-row {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .cta {
      border: 1px solid rgba(90, 208, 255, 0.5);
      background: linear-gradient(160deg, rgba(10, 108, 255, 0.4), rgba(6, 28, 70, 0.9));
      color: var(--text);
      padding: 12px 18px;
      border-radius: 16px;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 0.75rem;
      cursor: pointer;
      box-shadow: 0 0 18px rgba(35, 176, 255, 0.4);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      text-decoration: none;
    }

    .cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 22px rgba(90, 208, 255, 0.8);
    }

    section.card {
      background: rgba(5, 20, 50, 0.7);
      border-radius: 24px;
      border: 1px solid rgba(90, 208, 255, 0.25);
      padding: 28px;
      box-shadow: 0 12px 40px rgba(6, 64, 140, 0.35);
    }

    section.card h2 {
      font-size: 1.2rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .grid {
      display: grid;
      gap: 16px;
    }

    .grid.cols-3 {
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .grid.cols-4 {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }

    .service-button {
      border-radius: 18px;
      padding: 16px 18px;
      border: 1px solid rgba(90, 208, 255, 0.35);
      background: linear-gradient(140deg, rgba(15, 80, 180, 0.9), rgba(2, 18, 48, 0.95));
      color: var(--text);
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      font-size: 0.75rem;
      min-height: 78px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      box-shadow: 0 0 18px rgba(35, 176, 255, 0.5);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .service-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 26px rgba(90, 208, 255, 0.9);
    }

    .partners {
      display: grid;
      gap: 14px;
    }

    .partner-card {
      padding: 16px 18px;
      border-radius: 18px;
      border: 1px solid rgba(90, 208, 255, 0.3);
      background: rgba(4, 16, 40, 0.75);
      display: grid;
      gap: 6px;
      box-shadow: inset 0 0 12px rgba(90, 208, 255, 0.1);
    }

    .partner-card strong {
      font-size: 0.95rem;
    }

    .partner-card span {
      color: rgba(230, 245, 255, 0.72);
      font-size: 0.85rem;
    }

    .resin-search {
      display: grid;
      gap: 16px;
    }

    .resin-search input {
      width: 100%;
      padding: 14px 16px;
      border-radius: 16px;
      border: 1px solid rgba(90, 208, 255, 0.4);
      background: rgba(3, 14, 35, 0.8);
      color: var(--text);
      font-size: 0.95rem;
      outline: none;
      box-shadow: inset 0 0 12px rgba(35, 176, 255, 0.15);
    }

    .resin-search input::placeholder {
      color: rgba(230, 245, 255, 0.5);
    }

    .resin-results {
      display: grid;
      gap: 10px;
    }

    .resin-item {
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(90, 208, 255, 0.25);
      background: rgba(4, 18, 44, 0.8);
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9rem;
      gap: 10px;
      flex-wrap: wrap;
    }

    .resin-item small {
      color: rgba(230, 245, 255, 0.6);
    }

    .resin-item span,
    .resin-item small {
      min-width: 0;
      word-break: break-word;
    }

    .elio-chatbot,
    #elio-chatbot,
    .chatbot-elio {
      width: min(420px, 100%);
      max-width: 100%;
    }

    .elio-chatbot iframe,
    #elio-chatbot iframe,
    .chatbot-elio iframe {
      width: 100%;
      max-width: 100%;
      height: min(70vh, 640px);
      border-radius: 16px;
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(12, 88, 209, 0.35);
      border: 1px solid rgba(90, 208, 255, 0.4);
      color: rgba(230, 245, 255, 0.9);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .site-map {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .site-map a {
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(90, 208, 255, 0.35);
      color: var(--text);
      text-decoration: none;
      font-size: 0.8rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .site-map a:hover {
      border-color: rgba(90, 208, 255, 0.8);
    }

    .fab-container {
      position: fixed;
      right: 28px;
      bottom: 28px;
      width: 180px;
      height: 180px;
      pointer-events: none;
      z-index: 40;
    }

    .fab-center {
      position: absolute;
      right: 0;
      bottom: 0;
      width: 76px;
      height: 76px;
      border-radius: 50%;
      border: 1px solid rgba(90, 208, 255, 0.7);
      background: linear-gradient(140deg, rgba(31, 169, 255, 0.9), rgba(5, 76, 191, 0.95));
      box-shadow: 0 0 25px rgba(66, 190, 255, 0.9),
        inset 0 0 18px rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #f5fbff;
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
      pointer-events: auto;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .fab-center::before {
      content: "";
      position: absolute;
      inset: 8px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.35);
      opacity: 0.7;
    }

    .fab-center:hover {
      transform: scale(1.05);
      box-shadow: 0 0 35px rgba(90, 208, 255, 1), inset 0 0 20px rgba(255, 255, 255, 0.25);
    }

    .fab-actions {
      position: absolute;
      right: 8px;
      bottom: 8px;
      width: 160px;
      height: 160px;
      pointer-events: none;
    }

    .fab-action {
      position: absolute;
      width: 64px;
      height: 64px;
      border-radius: 50%;
      border: 1px solid rgba(90, 208, 255, 0.45);
      background: linear-gradient(160deg, rgba(13, 88, 209, 0.95), rgba(2, 30, 72, 0.95));
      box-shadow: 0 0 18px rgba(35, 176, 255, 0.6);
      color: var(--text);
      font-size: 0.7rem;
      font-weight: 600;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      flex-direction: column;
      opacity: 0;
      transform: scale(0.4);
      transition: transform 0.35s ease, opacity 0.35s ease;
      pointer-events: auto;
    }

    .fab-action span {
      font-size: 0.55rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .fab-action svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
      filter: drop-shadow(0 0 6px rgba(90, 208, 255, 0.8));
    }

    .fab-container.open .fab-action {
      opacity: 1;
      transform: scale(1);
      pointer-events: auto;
    }

    .fab-action.busca { transform: translate(-10px, -110px); }
    .fab-action.whatsapp { transform: translate(-110px, -10px); }
    .fab-action.manual { transform: translate(-95px, -95px); }

    .fab-container.open .fab-action.busca { transform: translate(-10px, -110px); }
    .fab-container.open .fab-action.whatsapp { transform: translate(-110px, -10px); }
    .fab-container.open .fab-action.manual { transform: translate(-95px, -95px); }

    .fab-container:not(.open) .fab-action {
      transform: translate(0, 0) scale(0.4);
      opacity: 0;
    }

    .fab-action::after {
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.16);
    }

    .fab-action:hover {
      box-shadow: 0 0 24px rgba(90, 208, 255, 0.9), inset 0 0 18px rgba(18, 160, 255, 0.35);
      transform: translate(var(--tx), var(--ty)) scale(1.05);
    }

    .fab-shadow-ring {
      position: absolute;
      right: -30px;
      bottom: -30px;
      width: 140px;
      height: 140px;
      border-radius: 50%;
      border: 1px solid rgba(35, 176, 255, 0.35);
      opacity: 0.45;
      filter: blur(0.4px);
      pointer-events: none;
    }

    .fab-container.open .fab-shadow-ring {
      animation: pulse 2.6s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(0.98); opacity: 0.45; }
      50% { transform: scale(1.08); opacity: 0.75; }
    }

    @media (max-width: 480px) {
      .fab-container {
        right: 20px;
        bottom: 20px;
        width: 160px;
        height: 160px;
      }

      .fab-center {
        width: 70px;
        height: 70px;
        font-size: 0.8rem;
      }

      .fab-action {
        width: 58px;
        height: 58px;
      }
    }

    @media (max-width: 720px) {
      .resin-item {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <main class="main">
    <div class="hud" id="inicio">
      <h1>Quanton3D • Experiência do Cliente</h1>
      <p>
        Bem-vindo ao hub do cliente Quanton3D. Serviços essenciais, vitrine de resinas e acesso rápido
        ao suporte estão novamente reunidos na landing page.
      </p>
      <div class="cta-row">
        <button class="cta" type="button" data-scroll="#servicos">Serviços</button>
        <button class="cta" type="button" data-scroll="#resinas">Vitrine de Resinas</button>
        <button class="cta" type="button" data-scroll="#manual">Manual de Uso</button>
        <a class="cta" href="https://wa.me/5531983340053" target="_blank" rel="noreferrer">Fale Conosco</a>
      </div>
    </div>

    <section class="card" id="servicos">
      <h2>Serviços principais</h2>
      <p class="status-pill">Operação ativa • Azul Neon</p>
      <div class="grid cols-4" style="margin-top: 16px;">
        <button class="service-button" type="button">Nivelamento</button>
        <button class="service-button" type="button">Calibração</button>
        <button class="service-button" type="button">Perfis de Resina</button>
        <button class="service-button" type="button">Diagnóstico Rápido</button>
        <button class="service-button" type="button">Manutenção</button>
        <button class="service-button" type="button">Suporte Técnico</button>
        <button class="service-button" type="button">Parâmetros Express</button>
        <button class="service-button" type="button">Treinamento</button>
        <button class="service-button" type="button" data-link="https://wa.me/5531983340053">Fale Conosco</button>
      </div>
    </section>

    <section class="card" id="chat-elios">
      <h2>Chat do Elios</h2>
      <p style="color: rgba(230, 245, 255, 0.75); margin-bottom: 12px;">
        Converse com o Elios, o coração do atendimento Quanton3D, para receber suporte imediato.
      </p>
      <div class="elio-chatbot" id="elio-chatbot" aria-label="Chat do Elios">
        <iframe
          title="Chat do Elios"
          loading="lazy"
          srcdoc="<!DOCTYPE html><html lang='pt-BR'><head><style>body{margin:0;display:flex;align-items:center;justify-content:center;font-family:'Segoe UI',system-ui,sans-serif;background:#04162c;color:#e6f5ff;}p{padding:16px;text-align:center;line-height:1.5;font-size:0.95rem;}</style></head><body><p>Carregando o chat do Elios... Em instantes você poderá conversar com o coração da Quanton3D.</p></body></html>"
          aria-describedby="chat-elios"
        ></iframe>
      </div>
    </section>

    <section class="card" id="resinas">
      <h2>Vitrine de Resinas</h2>
      <div class="resin-search">
        <input id="resin-search-input" type="text" placeholder="Digite para buscar resinas (ex: Pyroblast, Iron, Spark)" />
        <div class="resin-results" id="resin-results">
          <div class="resin-item">
            <span>Carregando resinas...</span>
            <small>Aguarde</small>
          </div>
        </div>
        <small id="resin-status" style="color: rgba(230, 245, 255, 0.6);"></small>
      </div>
    </section>

    <section class="card" id="manual">
      <h2>Manual de uso rápido</h2>
      <p style="color: rgba(230, 245, 255, 0.75); margin-bottom: 12px;">
        Acesse o fluxo essencial para operar com segurança e obter resultados consistentes.
      </p>
      <div class="grid cols-3">
        <div class="partner-card">
          <strong>1. Preparar a impressora</strong>
          <span>Nivele a base e confirme o ajuste do FEP.</span>
        </div>
        <div class="partner-card">
          <strong>2. Selecionar a resina</strong>
          <span>Consulte a vitrine de resinas e escolha o perfil ideal.</span>
        </div>
        <div class="partner-card">
          <strong>3. Suporte imediato</strong>
          <span>Use o botão “Fale Conosco” para contato direto.</span>
        </div>
      </div>
    </section>

    <section class="card" id="parceiros">
      <h2>Parceiros</h2>
      <div class="partners" id="partners-list">
        <div class="partner-card">
          <strong>Sincronizando parceiros...</strong>
          <span>Atualizando rede Quanton3D</span>
        </div>
      </div>
    </section>

    <section class="card" id="acessos">
      <h2>Mapa rápido do site</h2>
      <p style="color: rgba(230, 245, 255, 0.7); margin-bottom: 12px;">
        Todos os itens do layout anterior continuam acessíveis por aqui.
      </p>
      <div class="site-map">
        <a href="#inicio">Início</a>
        <a href="#servicos">Serviços</a>
        <a href="#chat-elios">Chat do Elios</a>
        <a href="#resinas">Vitrine de Resinas</a>
        <a href="#manual">Manual de Uso</a>
        <a href="#parceiros">Parceiros</a>
        <a href="https://wa.me/5531983340053" target="_blank" rel="noreferrer">WhatsApp</a>
      </div>
    </section>
  </main>

  <div class="fab-container" id="fabMenu" aria-label="Menu de ações rápidas">
    <div class="fab-shadow-ring"></div>
    <div class="fab-actions">
      <button class="fab-action busca" type="button" aria-label="Abrir vitrine de resinas" data-scroll="#resinas">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M10 2a8 8 0 1 0 5.29 14.04l4.34 4.34 1.41-1.41-4.34-4.34A8 8 0 0 0 10 2Zm0 2a6 6 0 1 1 0 12 6 6 0 0 1 0-12Z" />
        </svg>
        <span>Resinas</span>
      </button>
      <button class="fab-action whatsapp" type="button" aria-label="Abrir WhatsApp" data-link="https://wa.me/5531983340053">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20.52 3.5A11.8 11.8 0 0 0 12.02 0C5.4 0 .04 5.36.04 11.98a11.9 11.9 0 0 0 1.59 5.92L0 24l6.27-1.6a12 12 0 0 0 5.75 1.46h.01c6.62 0 12-5.36 12-11.98a11.8 11.8 0 0 0-3.51-8.38ZM12.02 22a10 10 0 0 1-5.1-1.4l-.37-.22-3.72.95 1-3.63-.24-.38a10 10 0 1 1 8.43 4.68Zm5.52-7.4c-.3-.15-1.77-.87-2.05-.97-.27-.1-.47-.15-.67.15s-.77.97-.94 1.17c-.17.2-.35.22-.65.07-.3-.15-1.27-.47-2.42-1.5-.9-.8-1.5-1.8-1.67-2.1-.17-.3-.02-.46.13-.6.14-.14.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.02-.52-.07-.15-.67-1.6-.92-2.2-.24-.58-.48-.5-.67-.5h-.57c-.2 0-.52.07-.8.37s-1.05 1.03-1.05 2.5 1.08 2.9 1.23 3.1c.15.2 2.12 3.25 5.13 4.55.72.31 1.28.5 1.71.64.72.23 1.37.2 1.88.12.57-.09 1.77-.72 2.02-1.41.25-.7.25-1.3.17-1.41-.08-.12-.27-.2-.57-.35Z" />
        </svg>
        <span>WhatsApp</span>
      </button>
      <button class="fab-action manual" type="button" aria-label="Abrir manual" data-scroll="#manual">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm0 2v12h11V6H6Zm2 2h7v2H8V8Zm0 4h7v2H8v-2Z" />
        </svg>
        <span>Manual</span>
      </button>
    </div>
    <button class="fab-center" type="button" id="fabToggle" aria-expanded="false">
      Menu
    </button>
  </div>

  <script>
    const fabMenu = document.getElementById("fabMenu");
    const fabToggle = document.getElementById("fabToggle");
    const actionButtons = fabMenu.querySelectorAll(".fab-action");
    const linkButtons = document.querySelectorAll("[data-link]:not(.fab-action)");
    const resinInput = document.getElementById("resin-search-input");
    const resinResults = document.getElementById("resin-results");
    const resinStatus = document.getElementById("resin-status");
    const partnersList = document.getElementById("partners-list");
    const scrollButtons = document.querySelectorAll("[data-scroll]");

    const toggleMenu = () => {
      const isOpen = fabMenu.classList.toggle("open");
      fabToggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
    };

    fabToggle.addEventListener("click", toggleMenu);

    actionButtons.forEach((button) => {
      button.addEventListener("click", () => {
        fabMenu.classList.remove("open");
        fabToggle.setAttribute("aria-expanded", "false");
        const link = button.getAttribute("data-link");
        const target = button.getAttribute("data-scroll");
        if (link) {
          window.location.href = link;
          return;
        }
        if (target) {
          const section = document.querySelector(target);
          if (section) {
            section.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        }
      });
    });

    linkButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const link = button.getAttribute("data-link");
        if (link) {
          window.open(link, "_blank", "noopener,noreferrer");
        }
      });
    });

    scrollButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const target = button.getAttribute("data-scroll");
        if (!target) return;
        const section = document.querySelector(target);
        if (section) {
          section.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    document.addEventListener("click", (event) => {
      if (!fabMenu.contains(event.target)) {
        fabMenu.classList.remove("open");
        fabToggle.setAttribute("aria-expanded", "false");
      }
    });

    const renderResins = (items = []) => {
      resinResults.innerHTML = "";
      if (!items.length) {
        resinResults.innerHTML = `
          <div class="resin-item">
            <span>Nenhuma resina encontrada.</span>
            <small>Tente outro termo</small>
          </div>
        `;
        return;
      }
      items.forEach((resin) => {
        const item = document.createElement("div");
        item.className = "resin-item";
        item.innerHTML = `
          <span>${resin.name}</span>
          <small>${resin.totalProfiles || 0} perfis</small>
        `;
        resinResults.appendChild(item);
      });
    };

    const fetchResins = async (query = "") => {
      resinStatus.textContent = "Conectando ao banco de resinas...";
      try {
        const params = new URLSearchParams();
        if (query) params.set("query", query);
        const response = await fetch(`/api/resins/search?${params.toString()}`);
        const data = await response.json();
        if (!data.success) {
          resinStatus.textContent = "Falha ao carregar resinas.";
          renderResins([]);
          return;
        }
        renderResins(data.resins);
        resinStatus.textContent = `Fonte: ${data.source === "mongo" ? "MongoDB" : "local"} • ${data.resins.length} resultados`;
      } catch (error) {
        resinStatus.textContent = "Erro de conexão ao carregar resinas.";
        renderResins([]);
      }
    };

    let resinTimeout = null;
    if (resinInput) {
      resinInput.addEventListener("input", () => {
        const value = resinInput.value.trim();
        clearTimeout(resinTimeout);
        resinTimeout = setTimeout(() => {
          fetchResins(value);
        }, 200);
      });
    }

    const loadPartners = async () => {
      try {
        const response = await fetch("/api/partners");
        const data = await response.json();
        if (!data.success || !Array.isArray(data.partners)) return;
        partnersList.innerHTML = "";
        data.partners.forEach((partner) => {
          const card = document.createElement("div");
          card.className = "partner-card";
          card.innerHTML = `
            <strong>${partner.name || "Parceiro Quanton3D"}</strong>
            <span>${partner.focus || "Integração técnica e comercial"}</span>
            ${partner.location ? `<span>${partner.location}</span>` : ""}
          `;
          partnersList.appendChild(card);
        });
      } catch (error) {
        // mantém conteúdo fallback
      }
    };

    fetchResins();
    loadPartners();
  </script>
</body>
</html>
